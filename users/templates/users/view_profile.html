{% extends 'base.html' %}

{% block head %}
<title>{% block title %}Your Account{% endblock title %}</title>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-md-4 col-xl-4 mb-4">
            <div class="card border-dark" style="width: 100%;">
                <h1 class="card-header bg-warning">{{ user.get_full_name }}</h1>
                <table class="table dt-responsive" cellspacing="0" width="100%">
                <!-- <thead class="thead" id="material">
                <tr>
                    <th></th>
                    <th></th>
                </tr>
            </thead> -->
                <tbody>
                    <tr>
                        <td><b>Name:</b> <br>{{ user.get_full_name }}</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><b>Username:</b> <br>{{ user.username }}</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><b>Email:</b> <br>{{ user.email }}</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><b>Major:</b> <br>{{ user.major }}</td>
                    </tr>
                    {% if user.is_superuser %}
                    <tr>
                        <td><b>Account Type:</b> <br>
                            Superuser/Admin
                        </td>
                        <td></td>
                    </tr>
                    {% endif %}
                </tbody>
            </table>
            </div>
            <div class="card border-dark" style="width: 100%;">
                <h1 class="card-header bg-warning">CU Audit</h1>
                <table class="table dt-responsive" cellspacing="0" width="100%">
                {% if audit %}
                <tbody>
                    <tr>
                        <td>
                            <h1>Congrats on uploading your audit!</h1>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <a href="{% url 'users:reset_audit' %}"><button class="btn btn-outline-dark">Reset Audit Data</button></a>
                        </td>
                    </tr>
                </tbody>
                {% else %}
                <tbody>
                    <tr>
                        <td>
                            <h1>You have not upload a CU Audit</h1>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <a href="{% url 'users:model_form_upload' %}"><button class="btn btn-outline-dark">Upload Audit</button></a>
                        </td>
                    </tr>
                </tbody>
                {% endif %}
            </table>
            </div>
        </div>
        <div class="col-md-8 col-xl-8 mb-8">
            <div class="card border-dark" style="width: 100%;">
                <h1 class="card-header bg-warning">Your Schedule</h1>
                <div class="card-body" id="calendar"></div>
            </div>
        </div>
    </div>
</div>


{% if audit %}
<div class="container-fluid">
    <div class="card">
        <div class="row">
            <div class="col-md-4 col-xl-4 mb-4">
                <div class="card">
                    <p>insert stats</p>
                </div>
            </div>
            <div id="result_div" class="col-md-8 col-xl-8 mb-8">
                <table class="table dt-responsive table-striped" cellspacing="0" style="text-align: center; margin-right: 100px;">
                    <thead class="thead-dark">
                        <tr>
                            <th colspan="7">Course History</th>
                        </tr>
                        <tr>
                            <th class="sticky-top">Year</td>
                            <th class="sticky-top">Semester</td>
                            <th class="sticky-top">Department</td>
                            <th class="sticky-top">Course #</td>
                            <th class="sticky-top">Course Title</td>
                            <th class="sticky-top">Credits</td>
                            <th class="sticky-top">Grade Received</td>
                        </tr>
                    </thead>
                    <tbody style="overflow-y: scroll; height: 200px;">
                        {% for entry in audit %}
                        <tr>
                            <td>{{entry.year}}</td>
                            <td>{{entry.semester}}</td>
                            <td>{{entry.course.department.name}}</td>
                            <td>{{entry.course.course_subject}}</td>
                            <td>{{entry.course.course_title}}</td>
                            <td>{{entry.credits}}</td>
                            <td>{{entry.grade}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
{% endif %}

<!-- Code for calendar -->
{% include "home/calendar.html" %}

{% endblock %}

{% block javascript %}
<script>

    $(document).ready(function () {
        // setup table scrolling
        $("#result_div").attr("style", `height: ${screen.height * 0.67}px; overflow: auto;`);
    });
</script>
{% endblock %}